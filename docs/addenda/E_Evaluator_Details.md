# 付録E: 評価器詳細（BERTScore / ROUGE / ルール）
**Status: 2025-10-19 JST**

## E-1. BERTScore（難）
- 既定モデル: `xlm-roberta-large`（多言語）。GPU推奨、なければ軽量モデルにフォールバック。
- 入力: 参照R・候補C
- 出力: P/R/F1（0–1）。`F1`を主指標。

## E-2. ROUGE（中）
- 指標: ROUGE-1/2/L（R/P/F1）
- 日本語: 正規化（数字・記号）＋ngramで開始、後で分かち書き対応を検討。

## E-3. ルール（易）
- 正規表現・語彙一致・構造検査（JSON/Markdown/字数・見出し有無）。
- 重み付け例:
  - 形式遵守 +0.2, 必須語彙 +0.3, 禁止語なし +0.2, 長さ範囲 +0.3 → 合計1.0

## E-4. 進化ループ（M2）
1) P0からk個の変異を生成（温度・指示差分）  
2) 各候補を上記評価器でスコア化  
3) 上位n件を選抜→次世代へ  
4) 収束/世代上限で停止、ベストを採用
