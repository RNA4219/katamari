{
  "id": "src/core_ext/context_trimmer.py",
  "role": "core",
  "summary": "会話履歴のトークン数を推定し目標トークン数までトリミング、圧縮率メトリクスを返すユーティリティ。",
  "public_api": [
    "trim_messages(messages, target_tokens, model)"
  ],
  "deps_out": [
    "tiktoken",
    "typing.Dict",
    "typing.List"
  ],
  "deps_in": [
    "src/app.py",
    "tests/core_ext/test_context_trimmer.py"
  ],
  "tests": [
    "tests/core_ext/test_context_trimmer.py"
  ],
  "risks": [
    "tiktoken 未導入環境ではヒューリスティック推定にフォールバックする"
  ],
  "generated_at": "2025-10-19T17:13:16Z"
}
